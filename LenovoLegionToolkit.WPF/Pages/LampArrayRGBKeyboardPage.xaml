<wpfui:UiPage
    x:Class="LenovoLegionToolkit.WPF.Pages.LampArrayRGBKeyboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:LenovoLegionToolkit.WPF.Controls"
    xmlns:custom="clr-namespace:LenovoLegionToolkit.WPF.Controls.Custom"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:lamp="clr-namespace:LenovoLegionToolkit.WPF.Controls.LampArray"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:resources="clr-namespace:LenovoLegionToolkit.WPF.Resources"
    xmlns:wpfui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="LampArray Debug"
    d:DesignHeight="1000"
    d:DesignWidth="1000"
    Scrollable="True"
    mc:Ignorable="d">

    <Grid
        Background="Transparent"
        MouseLeftButtonDown="PreviewGrid_MouseDown"
        MouseLeftButtonUp="PreviewGrid_MouseUp"
        MouseMove="PreviewGrid_MouseMove">

        <TextBlock
            Margin="0,16,0,24"
            Focusable="True"
            FontSize="24"
            FontWeight="Medium"
            Text="{x:Static resources:Resource.KeyboardBacklightPage_Title}" />

        <StackPanel Margin="0,60,8,0">
            <!--  Global Settings  -->
            <custom:CardControl Margin="0,0,0,24" Icon="Settings24">
                <custom:CardControl.Header>
                    <controls:CardHeaderControl Title="Global Settings" />
                </custom:CardControl.Header>
                <StackPanel>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="200" />
                            <ColumnDefinition Width="50" />
                        </Grid.ColumnDefinitions>
                        <TextBlock VerticalAlignment="Center" Text="Brightness" />
                        <Slider
                            Grid.Column="1"
                            Maximum="100"
                            Minimum="0"
                            ValueChanged="BrightnessSlider_ValueChanged"
                            Value="50" />
                        <TextBlock
                            x:Name="_brightnessValue"
                            Grid.Column="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Text="50%" />
                    </Grid>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="200" />
                            <ColumnDefinition Width="50" />
                        </Grid.ColumnDefinitions>
                        <TextBlock VerticalAlignment="Center" Text="Speed" />
                        <Slider
                            x:Name="_speedSlider"
                            Grid.Column="1"
                            Maximum="200"
                            Minimum="0"
                            ValueChanged="SpeedSlider_ValueChanged"
                            Value="100" />
                        <TextBlock
                            x:Name="_speedValue"
                            Grid.Column="2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Text="100%" />
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock VerticalAlignment="Stretch" Text="Smooth Transition" />
                        <CheckBox
                            x:Name="_smoothTransitionCheckBox"
                            Grid.Column="1"
                            Checked="SmoothTransition_Changed"
                            IsChecked="True"
                            Unchecked="SmoothTransition_Changed" />
                    </Grid>
                </StackPanel>
            </custom:CardControl>

            <!--  Preview Area (Large Panel)  -->
            <Border
                Margin="0,0,0,24"
                Padding="24"
                Background="{DynamicResource ControlAltFillColorSecondaryBrush}"
                BorderBrush="{DynamicResource ControlElevationBorderBrush}"
                BorderThickness="1"
                CornerRadius="8"
                Focusable="False">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!--  Visualizers (Centered & Large)  -->
                    <Viewbox
                        Grid.Column="0"
                        MaxHeight="600"
                        Stretch="Uniform">
                        <Grid x:Name="_previewGrid">
                            <!--  Keyboard  -->
                            <lamp:LampArrayKeyboardControl
                                x:Name="_visualKeyboard"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />

                            <!--  Rear Ambient  -->
                            <lamp:LampArrayRearAmbientControl
                                x:Name="_rearAmbientLight"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />

                            <!--  Aft Ambient  -->
                            <lamp:LampArrayAftAmbientControl
                                x:Name="_aftAmbientLight"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center" />
                        </Grid>
                    </Viewbox>

                    <!--  Side Controls  -->
                    <StackPanel
                        Grid.Column="1"
                        Margin="24,0,0,0"
                        VerticalAlignment="Center">
                        <TextBlock FontWeight="SemiBold" Text="Target Zone" />
                        <ComboBox
                            x:Name="_zoneSelect"
                            Width="160"
                            Margin="0,8,0,0"
                            SelectionChanged="ZoneSelect_SelectionChanged">
                            <ComboBoxItem x:Name="_cbiKeyboard" Content="Keyboard" />
                            <ComboBoxItem x:Name="_cbiRear" Content="Rear Ambient" />
                            <ComboBoxItem x:Name="_cbiAft" Content="Aft Ambient" />
                        </ComboBox>

                        <TextBlock
                            Margin="0,24,0,8"
                            FontWeight="SemiBold"
                            Text="Selection" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Margin="0,0,4,0"
                                Click="SelectAll_Click"
                                Content="All" />
                            <Button
                                Grid.Column="1"
                                Margin="4,0,0,0"
                                Click="DeselectAll_Click"
                                Content="None" />
                        </Grid>
                    </StackPanel>
                </Grid>
            </Border>

            <!--  Effect Settings  -->
            <custom:CardControl Margin="0,0,0,24" Icon="ColorFill24">
                <custom:CardControl.Header>
                    <controls:CardHeaderControl Title="Effects" />
                </custom:CardControl.Header>
                <StackPanel>
                    <TextBlock
                        x:Name="_selectionSummary"
                        Margin="0,0,0,8"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="No selection" />

                    <Grid Margin="0,0,0,16">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBlock VerticalAlignment="Center" Text="Effect" />
                        <ComboBox
                            x:Name="_effectSelect"
                            Grid.Column="1"
                            Width="200"
                            SelectionChanged="EffectSelect_SelectionChanged">
                            <ComboBoxItem Content="Static" />
                            <ComboBoxItem Content="Breathe" />
                            <ComboBoxItem Content="Wave" />
                            <ComboBoxItem Content="Rainbow" />
                            <ComboBoxItem Content="Meteor" />
                            <ComboBoxItem Content="Ripple" />
                            <ComboBoxItem Content="Sparkle" />
                            <ComboBoxItem Content="Gradient" />
                            <ComboBoxItem Content="Custom (Spatial)" />
                        </ComboBox>
                    </Grid>

                    <StackPanel x:Name="_customModePanel" Orientation="Horizontal">
                        <controls:ColorPickerControl x:Name="_colorPicker" />
                        <Button
                            Margin="10,0,0,0"
                            Click="ClearCustomColors_Click"
                            Content="Clear Colors" />
                        <Button
                            x:Name="_probeBtn"
                            Margin="10,0,0,0"
                            Click="ProbeLamps_Click"
                            Content="Probe Indices" />
                    </StackPanel>
                </StackPanel>
            </custom:CardControl>
        </StackPanel>

        <Canvas x:Name="_selectionCanvas" IsHitTestVisible="False">
            <Rectangle
                x:Name="_selectionRect"
                Fill="{DynamicResource SystemAccentColorBrush}"
                Opacity="0.4"
                Stroke="{DynamicResource SystemAccentColorBrush}"
                StrokeThickness="2"
                Visibility="Collapsed" />
        </Canvas>
    </Grid>
</wpfui:UiPage>
